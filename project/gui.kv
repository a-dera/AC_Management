#:import C kivy.utils.get_color_from_hex

#:import MDTextField kivymd.textfields.MDTextField
#:import ThemeManager kivymd.theming.ThemeManager
#:import MDRaisedButton kivymd.button.MDRaisedButton
#:import MDRoundFlatIconButton kivymd.button.MDRoundFlatIconButton
#:import MDRaisedButton kivymd.button.MDRaisedButton
#:import MDLabel kivymd.label.MDLabel
#:import MDTextFieldRound kivymd.textfields.MDTextFieldRound
#:import MDTabs kivymd.tabs.MDTabs
#:import MDTabsBase kivymd.tabs.MDTabsBase

#:import RiseInTransition kivy.uix.screenmanager.RiseInTransition
#:import FallOutTransition kivy.uix.screenmanager.FallOutTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition

<Section@BoxLayout>:
	size_hint_y:1
	canvas:
		Color:
			rgba:(0,0,0,1)
		Rectangle:
			size: self.size_hint
			pos: self.pos

<SectionLabel@Label>:
	font_size: 20
	bold: True
	color: (1, 1, 1, 1)

<MDTab@BoxLayout+MDTabsBase>:
	orientation: "vertical"

#--------------General Popups----------------------#

#infoPop is created for showing when usr forgot to select dropdown or write in textbox
<InfoPopup>:
	size_hint: (0.5, 0.4)
	background: "media/images/login3.png"
	canvas:
		Color:
			rgba: (0,0,1,0)
		Rectangle:
			pos: self.pos
			size: self.size
	BoxLayout:
		orientation: 'vertical'
		BoxLayout:
			size_hint: (1, .25)
			Label:
				text:"Information"
				color:0,0,0,1

		BoxLayout:
			size_hint: (1, .5)
			canvas:
				Color:
					rgba: (0,0,1,1)
				Rectangle:
					pos: self.pos
					size: self.size
			Label:
				id:label
				text:""
		AnchorLayout:
			size_hint: (1, .25)
			StrokeButton:
				size_hint: (.2,.5)
				text:"Ok"
				on_release:root.dismiss()


#for edit name,email,password and Username
<UserInfoEdit>:
	size_hint: (0.4, 0.65)
	auto_dismiss: True
	background: "media/images/login3.png"
	canvas:
		Color:
			rgba: (0,0,1,0)
		Rectangle:
			pos: self.pos
			size: self.size
	BoxLayout:
		orientation: 'vertical'
		#------------Label--------------#
		BoxLayout:
			size_hint: (1,.2)
			Label:
				text:"Edit User Information"
				color:0,0,0,1
		AnchorLayout:
			size_hint: (1,.6)
			canvas:
				Color:
					rgba: (0,0,1,1)
				Rectangle:
					pos: self.pos
					size: self.size
			GridLayout:
				size_hint: (.6,1)
				orientation: 'vertical'
				cols: 1
				spacing:10
				padding: 20
				TextInput:
					hint_text:"Name"
				TextInput:
					hint_text:"Email"
				TextInput:
					hint_text:"Username"
				TextInput:
					hint_text:"Password"

		BoxLayout:
			size_hint: (1,.2)
			AnchorLayout:
				MDRoundFlatIconButton:
					text:"Update"
					icon: "check-circle"
					font_size:30
					size_hint: (.5,.5)

			AnchorLayout:
				MDRoundFlatIconButton:
					text:"Cancel"
					icon: "close-circle"
					font_size:30
					size_hint: (.5,.5)
					on_release:root.dismiss()

#for edit name reg and roll no
<UpdateStudentInfo>:
	size_hint: (0.4, 0.6)
	auto_dismiss: True
	background: "media/images/login3.png"
	canvas:
		Color:
			rgba: (0,0,1,0)
		Rectangle:
			pos: self.pos
			size: self.size

	BoxLayout:
		orientation: 'vertical'
		#----------Label---------#
		BoxLayout:
			size_hint: (1,.2)
			Label:
				text:"Update Student Details"
				color:0,0,0,1
		#-----text boxes------#
		AnchorLayout:
			size_hint: (1, .55)
			canvas:
				Color:
					rgba: (0,0,1,1)
				Rectangle:
					pos: self.pos
					size: self.size
			GridLayout:
				size_hint: (.6,1)
				orientation: 'vertical'
				padding: 30
				cols:1
				spacing:10
				TextInput:
					size_hint: (1,.3)
				TextInput:
					size_hint: (1,.3)
				TextInput:
					size_hint: (1,.3)
		#---------Buttons Update and cancel-------#
		BoxLayout:
			size_hint: (1,.25)
			AnchorLayout:
				MDRoundFlatIconButton:
					text:"Update"
					#md_bg_color:"green"
					font_size:30
					icon: "check-circle"
					size_hint: (.5,.5)
					
			AnchorLayout:
				MDRoundFlatIconButton:
					text: "Cancel"
					#md_bg_color:"red"
					font_size:30
					icon: "close-circle"
					size_hint: (.5,.5)
					on_release:root.dismiss()


##creted for open at the time of detetion of a batch
<DeleteWarnPopup>:
	size_hint: (0.5, 0.4)
	background: "media/images/login3.png"
	canvas:
		Color:
			rgba: (0,0,1,0)
		Rectangle:
			pos: self.pos
			size: self.size
	BoxLayout:
		orientation: 'vertical'
		#--------Label---------#
		Label:
			size_hint: (1,.2)
			text:"Delete Confirmation"
			color:0,0,0,1
		#------Messege area--------#
		BoxLayout:
			size_hint: (1, .5)
			canvas:
				Color:
					rgba: (0,0,1,1)
				Rectangle:
					pos: self.pos
					size: self.size
			Label:
				id:labext
				text:"Are you sure to delete Year ("+app.root.ids.adminScreen.ids.yearBtn.text+") and Course ("+app.root.ids.adminScreen.ids.courseBtn1.text+") ?"
		#---------Buttons Confirm and cancel-------#
		BoxLayout:
			size_hint: (1, .3)
			AnchorLayout:
				MDRoundFlatIconButton:
					icon: "check-circle"
					size_hint: (.5,.5)
					text:"Confirm"
					#md_bg_color:("green",500)
					font_size:30
					on_release:root.onHitConfirm()
			AnchorLayout:
				MDRoundFlatIconButton:
					text: "Cancel"
					font_size:30
					#md_bg_color:("red",500)
					icon: "close-circle"
					size_hint: (.5,.5)
					on_release:root.dismiss()


#-------------Custom Buttons-----------------------#
<DropBtn>:
	size_hint_y: None
	size_hint_x: 0.6
	height: "40dp"
	elevation_normal: 20
	opposite_colors: True

<CustomButton@MDRaisedButton>:
	elevation_normal: 2
	opposite_colors: True

<StrokeButton@Button>:
	background_color: (0, 0, 0, 0)
	background_normal: ''
	back_color:(1,0,1,1)
	border_radius:18
	color:self.back_color
	bold:True
	canvas.before:
		Color:
			rgba:self.back_color
		Line:
			rounded_rectangle:(self.pos[0],self.pos[1],self.size[0],self.size[1],self.border_radius)
			width:1.2 

<SmoothButton@Button>:
	background_color: (0,0,0,0)
	background_normal: ''
	back_color:(1,0,1,1)
	border_radius:[18]
	canvas.before:
		Color:
			rgba:self.back_color
		RoundedRectangle:
			size:self.size
			pos:self.pos
			radius:self.border_radius

			
#---------------being used in 'Row' Class------------#
<ListItemLayout>:
	text: ''
    canvas.before:
        Color:
            rgba: (.0,.7,.7,1) if app.theme_cls.theme_style=="Dark" else C("#1B2631")
        RoundedRectangle:
            pos: self.pos
            size: self.size

    #on_touch_down:
    	#print("touched down")
    #	app.root.transition= RiseInTransition()
    #	app.root.current= "profilepage"

#---------------used in profile page----------#
<ListItemLayoutProfile@BoxLayout>:
	text: ''
    canvas.before:
        Color:
            rgba: (.0,.7,.7,1) if app.theme_cls.theme_style=="Dark" else C("#1B2631")
        RoundedRectangle:
            pos: self.pos
            size: self.size

    #on_touch_up: None


<LabelForList@Label>:
	font_size:"20dp"
	bold: True
	color:(0,0,0,1) if app.theme_cls.theme_style=="Dark" else (1,1,1,1)

#---------------being used in Profile Page--------#
<Rowinfo@BoxLayout>:
    canvas.before:
        Color:
            rgba:(.0,.7,.7,1) if app.theme_cls.theme_style=="Dark" else C("#17202A")
        RoundedRectangle:
            pos: self.pos
            size: self.size
            
    spacing: "10dp"
    sem:''
    paid: ''
    due: ''
    late:""
    date:''
    remarks:''
   
    #-------paid item--------#
    ListItemLayoutProfile:
        size_hint:(0.15,1)
        LabelForList:
            id: lbl0
            text: root.sem
            font_size:"20dp"
            bold: True
    #-------paid item--------#
    ListItemLayoutProfile:
        size_hint:(0.15,1)
        LabelForList:
            id: lbl1
            text: root.paid
            font_size:"20dp"
            bold: True
    #-------due item--------#
    ListItemLayoutProfile:
        size_hint:(0.15,1)
        LabelForList:
            id: lbl2
            text: root.due
            font_size:"20dp"
            bold: True
    #-------due item--------#
    ListItemLayoutProfile:
        size_hint:(0.15,1)
        LabelForList:
            id: lbl3
            text: root.late
            font_size:"20dp"
            bold: True
    #-------due item--------#
    ListItemLayoutProfile:
        size_hint:(0.15,1)
        LabelForList:
            id: lbl4
            text: root.date
            font_size:"20dp"
            bold: True
    #-------due item--------#
    ListItemLayoutProfile:
        size_hint:(0.25,1)
        LabelForList:
            id: lbl5
            text: root.remarks
            font_size:"20dp"
            bold: True

<LabelAccountPage@Label>
    size_hint: None, None
    size: self.texture_size
    pos_hint: {'center_x': .5}

<BoxMinimumHeight@BoxLayout>
    size_hint_y: None
    height: self.minimum_height

<StudentInfoHeader@BoxLayout>:
    info_title: ''
    info_name: ''
    
    AnchorLayout:
        anchor_x: "right"
        Label:
            size_hint: None, None
            size: self.texture_size
            text: root.info_title
            bold: True
            font_size: sp(15)
    AnchorLayout:
        anchor_x: "left"
        Label:
            text: root.info_name
            size_hint: None, None
            size: self.texture_size
	

##--------------------List Items' Layout---------------------------------------###########
<Row@BoxLayout>:
	canvas.before:
		Color:
			rgba:(.7,.7,.7,1) if app.theme_cls.theme_style=="Dark" else C("#17202A")
		Rectangle:
			pos: self.pos
			size: self.size
	spacing: "10dp"

	sno: 0
	reg: 0
	name: ''
	course: ''
	stream: ''
	batch: ''

	#-------S. No. item--------#
	ListItemLayout:
		size_hint:(0.05,1)
		#on_touch_down:
		#	print("touched downn")
		#on_touch_up:
    	#	print("touched upp")
		LabelForList:
			id: lbl0
			text: str(root.sno)

	#---------reg. no.-----------#
	ListItemLayout:
		size_hint:(0.1,1)
		#on_touch_down:
		#	print("touched downn")
		#on_touch_up:
    	#	print("touched upp")
		LabelForList:
			id: lbl1
			text: str(root.reg)
		

	#-------name item--------#
	ListItemLayout:
		size_hint:(0.2,1)
		#on_touch_down:
		#	print("touched downn")
		#on_touch_up:
    	#	print("touched upp")
		LabelForList:
			id: lbl2
			text: root.name
		

	#-------course item--------#
	ListItemLayout:
		size_hint:(0.1,1)
		#on_touch_up:
    	#	print("touched upp")
		LabelForList:
			id: lbl3
			text: root.course
		

	#-------stream item--------#
	ListItemLayout:
		size_hint:(0.1,1)
		#on_touch_up:
    	#	print("touched upp")
		LabelForList:
			id: lbl4
			text: root.stream
		

	#-------batch item--------#
	ListItemLayout:
		size_hint:(0.1,1)
		#on_touch_up:
    	#	print("touched upp")
		LabelForList:
			id: lbl5
			text: root.batch
		

<AdminRow@BoxLayout>:
	canvas.before:
		Color:
			rgba:(.7,.7,.7,1) if app.theme_cls.theme_style=="Dark" else C("#17202A")
		Rectangle:
			pos: self.pos
			size: self.size
	spacing: "10dp"

	name:''
	email:''
	username:''
	password:''

	ListItemLayoutProfile:
		size_hint:(0.23,1)
		LabelForList:
			text: root.name
			font_size:"15dp"
			bold: True

	ListItemLayoutProfile:
		size_hint:(0.23,1)
		LabelForList:
			text: root.email
			font_size:"15dp"
			bold: True

	ListItemLayoutProfile:
		size_hint:(0.23,1)
		LabelForList:
			text: root.username
			font_size:"15dp"
			bold: True

	ListItemLayoutProfile:
		size_hint:(0.23,1)
		LabelForList:
			text: root.password
			font_size:"15dp"
			bold: True
	BoxLayout:
		padding:0
		spacing:2
		size_hint: (.08,1)
		MDIconButton:
			size_hint: (.5,1)
			icon:"pencil"
			opposite_colors: True
			on_release:app.root.ids.adminScreen.openEditPopup()

		MDIconButton:
			size_hint: (.5,1)
			icon:"delete"
			opposite_colors: True


#root of the app
ScreenManager:
	HomeScreen:
		id: homeScreen
	UserScreen:
		id: userScreen
	AdminScreen:
		id: adminScreen
	ProfilePage:
		id: profilePage


#-------------------ProfilePage---------------------#
<ProfilePage>:
	name: 'profilepage'
    FloatLayout:
        canvas:
            Color:
                rgba:0,0,0,.8
            Rectangle:
                size: self.size
                pos: self.pos
        BoxLayout:
            orientation: 'vertical'
            spacing: dp(5)

            BoxMinimumHeight:

            	Widget:
            		size_hint: None, 1
            		width: 20

		        MDIconButton:
	        		size_hint: None, None
	        		size: 50,50
	        		icon: 'arrow-left'
	        		md_bg_color: app.theme_cls.primary_color
	        		theme_text_color: "Custom"
	        		text_color: [1,1,1,1]
		        	on_release:
		        		app.root.transition= FallOutTransition()
		        		app.root.current= "userScreen"
	        	

            BoxMinimumHeight:
                orientation: 'vertical'
                padding: 0, dp(15), 0, 0
                spacing: dp(7)
                pos_hint: {'top': 1}
                Image:
                    size_hint: None, None
                    size: self.size
                    source: 'media/images/user.png'
                    pos_hint: {'center_x': .5}
                LabelAccountPage:
                    id: name
                    halign: 'center'
                    font_size: '30sp'
                    bold: True
                LabelAccountPage:
                    id: roll
                    halign: 'center'
                    font_size: '18sp'
                    
            BoxLayout:
                id: box
                orientation: 'vertical'
                spacing: dp(10)
                padding: dp(10)
                opacity: 0
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, .7
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                BoxMinimumHeight:
                    spacing: dp(10)
                    padding: 2, 0, 10, 0
                    BoxLayout:
                        canvas:
                            Color:
                                rgba: 0, 0, 0, .7
                            RoundedRectangle:
                                size: self.size
                                pos: self.pos
                        id: button
                        size_hint_x: None
                        size_hint_y:None
                        height:40
                        StudentInfoHeader:
                            id: course
                            info_title: "Course: "
                        StudentInfoHeader:
                            id: stream
                            info_title: "Stream: "
                        StudentInfoHeader:
                            id: batch
                            info_title: "Batch: "
                        StudentInfoHeader:
                            id: fee
                            info_title: "Fee: "
                            
            
                    MDIconButton:
                    	id: printbtn
                    	icon: "printer"
                        size_hint: None, None
                        size: 40,40
                        opposite_colors: True
                        md_bg_color: app.theme_cls.primary_color
                        theme_text_color: 'Custom'
                        text_color: [1,1,1,1] if app.theme_cls.theme_style=="Dark" else [0,0,0,1]
                        on_release: print("Print data")
                BoxLayout:
                    orientation:"vertical"
                    spacing:2
                    BoxLayout:
                        size_hint_y:None
                        height:40
                        canvas:
                            Color:
                                rgba: 0, 0, 0, .7
                            RoundedRectangle:
                                size: self.size
                                pos: self.pos
                        BoxLayout:
                            size_hint:.15,1
                            Label:
                                text:"Semester"
                        BoxLayout:
                            size_hint:.15,1
                            Label:
                                text:"Paid"
                        BoxLayout:
                            size_hint:.15,1
                            Label:
                                text:"Due"
                        BoxLayout:
                            size_hint:.15,1
                            Label:
                                text:"Late"
                        BoxLayout:
                            size_hint:.15,1
                            Label:
                                text:"Date"
                        BoxLayout:
                            size_hint:.25,1
                            Label:
                                text:"Remarks"
                    BoxLayout:
                        canvas:
                            Color:
                                rgba:.6,.3,0.1,0
                            RoundedRectangle:
                                pos:self.pos
                                size:self.size
                        RecycleView:
                            id: rv
                            scroll_type: ['bars', 'content']
                            scroll_wheel_distance: dp(80)
                            bar_width: dp(7)
                            viewclass: 'Rowinfo'
                            data:[{"sem":"1","paid": "2432342", "due": "34242","late":"42334","date":"44-34-3434","remarks":"jaldi do"},{"sem":"2","paid": "24300", "due": "34242","late":"42334","date":"24-04-3434","remarks":"jaldi do"}]
                            RecycleBoxLayout:
                                default_size: None, dp(56)
                                default_size_hint: 1, None
                                size_hint_y: None
                                height: self.minimum_height
                                orientation: "vertical"
                                spacing: dp(5)

#--------------------------HomeScreen-----------------------------------------#####

<HomeScreen>:

	name:"homeScreen"
	AnchorLayout:
		Video:
            #source: 'media/videos/Moving_Floor.mp4'
            size_hint: (None, None)
            size:1400,800
            play:True
            options:{'eos': 'loop'}

		BoxLayout:
			orientation: 'vertical'
			BoxLayout:
				size_hint: (1,0.55)

			BoxLayout:
				orientation: 'vertical'
				size_hint: (1,0.45)

				#contains main buttons----------
				BoxLayout:
					size_hint: (1,0.4)
					AnchorLayout:
						anchor_x: 'center'
						anchor_y: 'center'
						Button:
							size_hint: None, None
							size: 125,145
							border: (0, 0, 0, 0)
							background_normal: 'media/images/multi_user3.png'
							background_down: 'media/images/multi_user3_down.png'

							on_release:
								root.openLoginPop("User")

					AnchorLayout:
						anchor_x: 'center'
						anchor_y: 'center'

						Button:
							size_hint: None, None
							size: 120,120
							border: (0, 0, 0, 0)
							background_normal: 'media/images/admin3.png'
							background_down: 'media/images/admin3_down.png'
							on_release:
								root.openLoginPop("Admin")


				##-------------labels------------------------###############
				BoxLayout:
					size_hint:1,.2

					AnchorLayout:
						anchor_x: "center"
						anchor_y: "center"

						Label:
							text: "USERS"
							bold: True
							color: C("#000000")
							font_size: dp("24")



					AnchorLayout:
						anchor_x: "center"
						anchor_y: "center"
						Label:
							text: "ADMIN"
							bold: True
							color: C("#000000")
							font_size: dp("24")



				#blankkkkkkk-------------__#######
				BoxLayout:
					size_hint: (1,0.4)

####--------------------------Login Popup Class------------------------------------##############

<LoginPopup>:
	

	size_hint: (0.4, 0.7)
	
	auto_dismiss: True

	background: "media/images/login4.png"
	canvas:
		Color:
			rgba: (0,0,1,0)
		Rectangle:
			pos: self.pos
			size: self.size
     
   #####-------------------Parent Boxlayout----------------------------######################

	BoxLayout:
		orientation: 'vertical'
		canvas:
			Color:
				rgba: (1,0,1,0)
			Rectangle:
				pos: self.pos
				size: self.size

		#------------------------title------------------------------------------#############
		BoxLayout:
			size_hint: (1, .1)

			canvas:
				Color:
					rgba: (1,0,1,0)
				Rectangle:
					pos: self.pos
					size: self.size

			Label:
				id: loginTitle
				text: ""
				font_size: dp(35)
				bold: True
				color: (1, 1, 1, 1)


		AnchorLayout:
			size_hint: (1, 0.9)
			canvas:
				Color:
					rgba: (1,0,0.5,0)
				Rectangle:
					pos: self.pos
					size: self.size

			#####------------------contains textInputs------------------------------#
			GridLayout:
				size_hint: (0.6, 0.9)
				canvas:
					Color:
						rgba: (0.5,0,1,0)
					Rectangle:
						pos: self.pos
						size: self.size


				rows: 4
				cols: 1
				spacing: (0, 2)

				#------------login failure message------------------------------------#
				BoxLayout:
					size_hint: (1, 0.1)
					canvas:
						Color:
							rgba: (0.5,0.3,1,0)
						Rectangle:
							pos: self.pos
							size: self.size

					Label:
						id: warningInfo
						text: ''
						color: (1, 0, 0, 1)

				#-----------------------username-----------------#
				AnchorLayout:
					size_hint: (1, 0.25)
					canvas:
						Color:
							rgba: (0.3,0,0.2,0)
						Rectangle:
							pos: self.pos
							size: self.size

					BoxLayout:
						size_hint: (1, None)
						height: 40
						canvas:
							Color:
								rgba: (0,0,0,0)
							Rectangle:
								pos: self.pos
								size: self.size

						#---------username input----------#
						BoxLayout:
							size_hint: (1,1)
							canvas:
								Color:
									rgba: (0.5,0.2,0.3,0)
								Rectangle:
									pos: self.pos
									size: self.size
							MDTextFieldRound:
								id: username_
								size_hint: (1, 1)
								hint_text:"Username"
								icon_left: 'account-box'
								icon_type:'left'
								on_text_validate:
									x= root.login(root.ids.username_.text, root.ids.password_.text,)
									if (x and root.ids.loginTitle.text=="User Login"): app.root.current= "userScreen"
									if x and root.ids.loginTitle.text=="User Login": app.root.ids.userScreen.onStartUserScr()

									if (x and root.ids.loginTitle.text=="Admin Login"): app.root.current= "adminScreen"
									if x and root.ids.loginTitle.text=="Admin Login": app.root.ids.adminScreen.onStartAdminScr()

				#-------------------password---------------------------#
				AnchorLayout:
					size_hint: (1, 0.25)
					anchor_y: 'top'
					canvas:
						Color:
							rgba: (0.5,0,0.3,0)
						Rectangle:
							pos: self.pos
							size: self.size

					BoxLayout:
						size_hint: (1, None)
						height: 40
						canvas:
							Color:
								rgba: (0,0,0,0)
							Rectangle:
								pos: self.pos
								size: self.size

						#---------password input----------#
						BoxLayout:
							size_hint: (1,1)
							canvas:
								Color:
									rgba: (0,0,0,0)
								Rectangle:
									pos: self.pos
									size: self.size
							MDTextFieldRound:
								id: password_
								size_hint: (1, 1)
								hint_text:"Password"
								icon_left: 'key-variant'
								icon_right: 'eye-off'
								icon_right_dasabled: False
								password: True
								icon_callback: root.show_password
								on_text_validate:
									x= root.login(root.ids.username_.text, root.ids.password_.text,)
									if (x and root.ids.loginTitle.text=="User Login"): app.root.current= "userScreen"
									if x and root.ids.loginTitle.text=="User Login": app.root.ids.userScreen.onStartUserScr()

									if (x and root.ids.loginTitle.text=="Admin Login"): app.root.current= "adminScreen"
									if x and root.ids.loginTitle.text=="Admin Login": app.root.ids.adminScreen.onStartAdminScr()
								
				#-------------------Contains login button and fotgot password----------------------------------#
				BoxLayout:
					orientation: 'vertical'
					size_hint: (1, 0.4)
					canvas:
						Color:
							rgba: (1,0,1,0)
						Rectangle:
							pos: self.pos
							size: self.size

					#-------------Login Btn Area----------------------------------#
					AnchorLayout:
						size_hint: (1, 0.5)
						canvas:
							Color:
								rgba: (0.5,0.5,0.5,0)
							Rectangle:
								pos: self.pos
								size: self.size

						#-----------------login btn-------------#
						MDFillRoundFlatButton:
							size_hint: (1, .5)
							border: (10, 10, 10, 10)
							text: "Login"
							on_release:
								x= root.login(root.ids.username_.text, root.ids.password_.text,)
								if (x and root.ids.loginTitle.text=="User Login"): app.root.current= "userScreen"
								if x and root.ids.loginTitle.text=="User Login": app.root.ids.userScreen.onStartUserScr()

								if (x and root.ids.loginTitle.text=="Admin Login"): app.root.current= "adminScreen"
								if x and root.ids.loginTitle.text=="Admin Login": app.root.ids.adminScreen.onStartAdminScr()


					#--------------forgot password area---------------------------#
					AnchorLayout:
						size_hint: (1, 0.5)
						canvas:
							Color:
								rgba: (0.3,0.3,0.3,0)
							Rectangle:
								pos: self.pos
								size: self.size

						Button:
							size_hint: (0.5, 0.3)
							background_color: (0, 0, 0, 0)
							canvas.before:
								Color:
									rgba: (0,0,1,0)
								Rectangle:
									pos: self.pos
									size: self.size

							text:"Forgot Details?"
							color: (0, 0, 1, 1)




#-----------------------------------------------USERS SCREEN----------------------------------------###

<UserScreen>:
	name: "userScreen"

	BoxLayout:
		orientation: 'vertical'

		#---------------------------header Area--------------------------------------###########
		BoxLayout:
			size_hint: (1, 0.1)
			canvas:
				Color:
					rgba: app.theme_cls.primary_color
				Rectangle:
					pos: self.pos
					size: self.size

			#-----------------hamburger button--------------------##
			AnchorLayout:
				size_hint: (0.1, 1)

				MDIconButton:
					id: hamburger
					icon: "menu"
					theme_text_color: "Custom"
					text_color: [1,1,1,1]
					icon_size: 55
					on_release:
						root.open_sideNav()


		#--------Semester Dropdown (This will be deleted in future due to tabbed panels)------------#
			AnchorLayout:
				size_hint: (0.15, 1)

			#-----------------file info area-----------------------##
			BoxLayout:
				size_hint: (0.5, 1)

				Label:
					id:batchLabel
					text: ""
					halign: "center"
					color: (0, 0, 0, 1)
					font_size: 30

			#-----------------search area-------------------------###
			AnchorLayout:
				size_hint: (0.25, 1)

				MDTextFieldRound:
					id: search
					size_hint: (0.9, .5)
					hint_text:"Search"
					icon_left: 'magnify'
					icon_type:'left'
					hint_text_color:0,0,0,0.7
					active_color: [1, 1, 1, .7]
					normal_color: [.3, .3, 0.3, .5]
					text_size: dp(30)
					foreground_color: 0,0,0,1
					on_text:
						root.search(self.text.strip())

		#-----------------------body section------------------------------------#################
		BoxLayout:
			size_hint: (1, 0.9)
			orientation: 'vertical'
			#-----All Semester Tab---------#######
			
			BoxLayout:
				orientation:"vertical"
				BoxLayout:
					size_hint: (1, 0.08)
					canvas:
						Color:
							rgb: C("#000000")
						Rectangle:
							pos: self.pos
							size: self.size
					Section:
						size_hint_x: 0.05
						SectionLabel:
							text: "S.No."

					Section:
						size_hint_x: 0.1
						SectionLabel:
							text: "Reg. No."

					Section:
						size_hint_x: 0.2
						SectionLabel:
							text: "Name"

					Section:
						size_hint_x: 0.1
						SectionLabel:
							text: "Course"

					Section:
						size_hint_x: 0.1
						SectionLabel:
							text: "Stream"

					Section:
						size_hint_x: 0.1
						SectionLabel:
							text: "Batch"

				#-------------------------------list area-----------------------------------###########
				BoxLayout:
					id: list_area
					size_hint: (1,0.93)
					spacing:"5dp"
					RecycleView:
						id: rv
						scroll_type: ['bars', 'content']
						scroll_wheel_distance: dp(100)
						bar_width: dp(7)
						viewclass: 'Row'
						data: []
						RecycleBoxLayout:
							default_size: None, dp(56)
							default_size_hint: 1, None
							size_hint_y: None
							height: self.minimum_height
							orientation: "vertical"
							spacing: dp(5)

				

#--------------------------------Admin Screen--------------------------------------########
<AdminScreen>:
	name:"adminScreen"
	id:adminScreen
	BoxLayout:
		orientation: 'vertical'
		#-----------title Bar------------#
		AnchorLayout:
			size_hint: (1,0.07)
			canvas:
				Color:
					rgb: C("#000000")
				Rectangle:
					pos: self.pos
					size: self.size
			Label:
				text:"Admin"
				font_size:30
		#------------Main Layout ---------#
		BoxLayout:
			size_hint: (1,0.96)
			#-------------Side Navigation---------#
			BoxLayout:
				orientation: 'vertical'
				size_hint: (0.13,1)
				canvas:
					Color:
						rgb: C("#ffffff")
					Rectangle:
						pos: self.pos
						size: self.size

				#----------ToggleButtons in here--------------#
				GridLayout:
					size_hint: (1,0.7)
					rows:4
					spacing:2
					padding:2
					cols: 1
					canvas:
						Color:
							rgb: C("#000000")
						Rectangle:
							pos: self.pos
							size: self.size

					#------manage user btn-------------#
					ToggleButton:
						text:"Manage User" if self.state=="down" else ""
						font_size:25
						bold:True
						#state: 'down'
						group: "utilBtns"
						background_normal: 'media/images/mngusers.png'
						on_state: root.change_screen(self)

					#-------manage students btn---------#
					ToggleButton:
						text:"Manage Student" if self.state=="down" else ""
						font_size:25
						bold:True
						group: "utilBtns"
						background_normal: 'media/images/mngstud.png'
						on_state: root.change_screen(self)

					#--------Admin settings btn----------#
					ToggleButton:
						text:"Admin Setting" if self.state=="down" else ""
						font_size:25
						bold: True
						group: "utilBtns"
						background_normal: 'media/images/adminsett.png'
						on_state: root.change_screen(self)
					#--------Appsetting btn in initial down state
					ToggleButton:
						text:"App Setting" if self.state=="down" else ""
						font_size:25
						group: 'utilBtns'
						background_normal: 'media/images/appsetting.png'
						on_state:root.change_screen(self)

				AnchorLayout:
					size_hint: (1,0.2)
					
					BoxLayout:
						size_hint: (1,None)
						height:"50dp"
						
						BoxLayout:
							size_hint: (.7, 1)	
							Button:
								background_color: (1,1,1,0)

								text:"Logout"
								font_size:30
								color:(0,0,0,1)
								bold: True
								on_release:
									app.root.current="homeScreen"
						BoxLayout:
							size_hint: (.3, 1)
							Button:
								size_hint: (None,None)
								size: (50,50)
								#text:"Home"
								background_normal: 'media/images/logout-button1.png'
								on_release:
									app.root.current="homeScreen"

			#------------Working Layout---------------------#
			BoxLayout:
				size_hint: (0.83,1)
				ScreenManager:
					id:scrManager

					#---------------Manage User Screen-----------#
					Screen:
						name:"manageUser"
						BoxLayout:
							spacing:8
							padding:8
							orientation: 'vertical'
							#------------------Users Data types Label------------------#
							GridLayout:
								rows: 1
								cols: 
								size_hint: (1,None)
								size: (0,40)
								canvas:
									Color:
										rgba:app.theme_cls.primary_color
									Rectangle:
										pos: self.pos
										size: self.size

									#------add user button-----------------#
									


								BoxLayout:
									Label:
										text:"Name"
										bold:True
								BoxLayout:
									Label:
										text:"E-Mail"
										bold:True
								BoxLayout:
									Label:
										text:"Userame"
										bold:True
								BoxLayout:
									Label:
										text:"Password"
										bold:True
								BoxLayout:
									size_hint: None, None
									size: (100, 40)
							#------------------Users Data------------------#
							BoxLayout:
								size_hint: (1,0.715)
								spacing:"5dp"
								RecycleView:
									id: rv
									scroll_type: ['bars', 'content']
									scroll_wheel_distance: dp(80)
									bar_width: dp(7)
									viewclass: 'AdminRow'
									RecycleBoxLayout:
										default_size: None, dp(40)
										default_size_hint: 1, None
										size_hint_y: None
										height: self.minimum_height
										orientation: "vertical"
										spacing: dp(5)
			
							#----dynamic Layout With Fields-------#
							BoxLayout:
								size_hint: (1,0.08)
								id:dyn_input
								spacing:5
								padding:2
								
							#-------------buttons Add,Update & Delete----------#
							AnchorLayout:
								size_hint: (1,0.145)
								anchor_x: 'right'
								padding: 5
								CircularToggleButton:
									id:addusrBtn
									size_hint:(None,None)
									size:(60,60)
									background_color:(0,0,0,0)
									text:"+"
									font_size:30
									color:1,1,1,1
									background_normal:""
									canvas.before:
										Color:
											rgba:app.theme_cls.primary_color
										Ellipse:
											size:self.size
											pos:self.pos
									on_release:
										if (self.state=="down") :root.Add_User_Layout()
										if(self.state=="normal"):root.ids.dyn_input.clear_widgets()



					#----------------manage Student Screen-------------##
					Screen:
						name:"manageStudent"
						MDTabs:
							id: tab_panel
							tab_display_mode:'text'

							MDTab:
								name: 'addBatch'
								text: "Add Batch"
								icon: "plus"

								BoxLayout:							
									orientation: 'vertical'
									
									BoxLayout:					
										size_hint: (1,.1)
										canvas:
											Color:
												rgba: (0, 1, 1, 1)
											Rectangle:
												size:self.size 
												pos:self.pos
										Label:
											text:"Add Batch"
											bold: True
											font_size: 30
											color:(0,0,0,1)
									
									AnchorLayout:						
										size_hint: (1,.7)

										BoxLayout:
											orientation: 'vertical'
											size_hint: (.5,1)
											
											BoxLayout:
												spacing: 50

												MDTextField:
													id: fromYear
													hint_text:"From Year"
													input_filter: "int"
													write_tab: False
													multiline: False
													on_text:
														self.text =self.text[:4] if len(self.text)>4 else self.text

												MDTextField:
													id: toYear
													hint_text:"To Year"
													input_filter: "int"
													write_tab: False
													multiline: False
													on_text:
														self.text =self.text[:4] if len(self.text)>4 else self.text

												MDTextField:
													hint_text:"Fee"
													input_filter: "int"
													write_tab: False
													multiline: False
													id: fee

											AnchorLayout:
												spacing: 50
												BoxLayout:
													spacing: 50
													size_hint: None, None
													width: self.minimum_width
													height: self.minimum_height


													MDRaisedButton:
														size_hint: None, None
														size: 100, 50
														id:courseBtn1
														elevation_normal:10
														opposite_colors: True
														text:"Select Course"
														on_release:root.openCourseList(self)
													MDRaisedButton:
														size_hint: None, None
														size: 100, 50
														id:streamBtn
														elevation_normal:10
														opposite_colors: True
														text:"Select Stream"
														on_release:root.openStreamList(self)
											BoxLayout:
												MDRaisedButton:
													size_hint: (1,.25)
													text: 'Upload file'
													elevation_normal: 10
													opposite_colors: True
													on_release:
														root.connectFileSelector(root.ids.fromYear.text,root.ids.toYear.text,root.ids.courseBtn1.text,\
														root.ids.streamBtn.text, root.ids.fee.text)
									BoxLayout:
										size_hint: (1,.2)

							MDTab:
								name: 'deleteBatch'
								text: 'Delete Batch'
								icon: "delete"
								BoxLayout:							
									orientation: 'vertical'
									
									BoxLayout:					
										size_hint: (1,.1)
										canvas:
											Color:
												rgba: (0, 1, 1, 1)
											Rectangle:
												size:self.size 
												pos:self.pos
										Label:
											text:"Delete Batch"
											bold: True
											font_size: 30
											color:(0,0,0,1)
									
									AnchorLayout:						
										size_hint: (1,.7)

										BoxLayout:
											orientation: 'vertical'
											size_hint: (.5,1)
											#padding: 10
											#spacing: dp(10)

											BoxLayout:
												spacing: 50

												MDTextField:
													id: fromYear
													hint_text:"From Year"
													input_filter: "int"
													write_tab: False
													multiline: False
													on_text:
														self.text =self.text[:4] if len(self.text)>4 else self.text

												MDTextField:
													id: toYear
													hint_text:"To Year"
													input_filter: "int"
													write_tab: False
													multiline: False
													on_text:
														self.text =self.text[:4] if len(self.text)>4 else self.text

											AnchorLayout:
												
												BoxLayout:
													spacing: 80
													size_hint: None, None
													width: self.minimum_width
													height: self.minimum_height


													MDRaisedButton:
														size_hint: None, None
														size: 100, 50
														id:courseBtn1
														elevation_normal:10
														opposite_colors: True
														text:"Select Course"
														on_release:root.openCourseList(self)
													MDRaisedButton:
														size_hint: None, None
														size: 100, 50
														id:streamBtn
														elevation_normal:10
														opposite_colors: True
														text:"Select Stream"
														on_release:root.openStreamList(self)
											BoxLayout:
												MDRaisedButton:
													size_hint: (1,.25)
													text: 'Delete Batch'
													elevation_normal: 10
													opposite_colors: True
													on_release:
														root.connectFileSelector(root.ids.fromYear.text,root.ids.toYear.text,root.ids.courseBtn1.text,\
														root.ids.streamBtn.text, root.ids.fee.text)
									BoxLayout:
										size_hint: (1,.2)

							MDTab:
								name: 'updateStudent'
								text: 'Update Student Details'
								icon: "update"
								BoxLayout:							
									orientation: 'vertical'
									
									BoxLayout:					
										size_hint: (1,.1)
										canvas:
											Color:
												rgba: (0, 1, 1, 1)
											Rectangle:
												size:self.size 
												pos:self.pos
										Label:
											text:"Update Student Info"
											bold: True
											font_size: 30
											color:(0,0,0,1)
									
									AnchorLayout:						
										size_hint: (1,.7)

										BoxLayout:
											orientation: 'vertical'
											size_hint: (.5,1)
										
											BoxLayout:
												
												MDTextField:
													id: fromYear
													hint_text:"Registration Number"
													input_filter: "int"
													write_tab: False
													multiline: False
													on_text:
														self.text =self.text[:4] if len(self.text)>4 else self.text

											AnchorLayout:
												spacing: 50
												BoxLayout:
													spacing: 50
													size_hint: None, None
													width: self.minimum_width
													height: self.minimum_height


													MDRaisedButton:
														size_hint: None, None
														size: 100, 50
														id:courseBtn1
														elevation_normal:10
														opposite_colors: True
														text:"Select Course"
														on_release:root.openCourseList(self)
													MDRaisedButton:
														size_hint: None, None
														size: 100, 50
														id:streamBtn
														elevation_normal:10
														opposite_colors: True
														text:"Select Stream"
														on_release:root.openStreamList(self)
											BoxLayout:
												MDRaisedButton:
													size_hint: (1,.25)
													text: 'Delete Batch'
													elevation_normal: 10
													opposite_colors: True
													on_release:
														root.connectFileSelector(root.ids.fromYear.text,root.ids.toYear.text,root.ids.courseBtn1.text,\
														root.ids.streamBtn.text, root.ids.fee.text)
									BoxLayout:
										size_hint: (1,.2)

							
					#----------------Manage Admin Setting--------------#
					Screen:
						name:"adminSetting"
						#BoxLayout:
						#	canvas:
						#		Color:
						#			rgb: C("#0464ff")
						#		Rectangle:
						#			pos: self.pos
						#			size: self.size
						#	Label:
						#		text:"Admin Setting"
						MDTabs:
							id: tab_panel
							tab_display_mode:'text'

							MDTab:
								name: 'music'
								text: "Music"
								icon: "playlist-play"
								MDLabel:
									font_style: 'Body1'
									theme_text_color: 'Primary'
									text: "Here is my music list :)"
									halign: 'center'
							MDTab:
								name: 'movies'
								text: 'Movies'
								icon: "movie"

								MDRaisedButton:
									text: "MDRaisedButton"
									elevation_normal: 10
									opposite_colors: True
									pos_hint: {'x':.5,'y':0.5}

					#---------------Manage App setting-----------------##
					Screen:
						name:"appSetting"
						BoxLayout:
							orientation: 'vertical'
							size_hint_y: None
							height:dp(80)
							center_y: self.parent.center_y
							MDRaisedButton:
								size_hint: None, None
								size: 3 * dp(48), dp(48)
								center_x: self.parent.center_x
								text: 'Change theme'
								on_release: root.theme_picker_open()
								opposite_colors: True
								pos_hint: {'center_x': .5}
							MDLabel:
								text:
								    "Current: " + app.theme_cls.theme_style\
								    + ", " + app.theme_cls.primary_palette
								theme_text_color: 'Primary'
								pos_hint: {'center_x': .5}
								halign: 'center'



#-----------------------Side Navigation ------------------------#

<SideNav>:
	size_hint: (0.2, 1)
	pos_hint: {'x': -.3}
	on_open: app.root.ids.userScreen.anim_out(root)
	on_dismiss: app.root.ids.userScreen.anim_in(root)
	BoxLayout:
		orientation: 'vertical'

		#--------------User Icon---------------------------#
		AnchorLayout:
			size_hint: (1,0.3)
			canvas:
				Color:
					rgba: (0, 1, 1, 1)
				Rectangle:
					pos: (self.x, self.y)
					size: self.size


			Image:
	            source: 'media/images/user_logout_pic.png'
	            size_hint: None, None
	            size: 140,140
		#------------User name and Logout Button-------------#
		BoxLayout:
			size_hint: (1,0.07)
			canvas:
				Color:
					rgba:app.theme_cls.primary_color
				Rectangle:
					pos: (self.x, self.y)
					size: self.size
		#------usename--------#
			BoxLayout:
				size_hint: (0.8,1)
				Label:
					text:"Mukesh"
					bold: True
					font_size: 20
			#-------logout Button------#
			AnchorLayout:
				size_hint: (0.2,1)
				MDIconButton:
					icon:"power"
					on_release:
						app.root.current='homeScreen'
						root.dismiss()


		#---------Drop Downs----------------------------#
		BoxLayout:
			orientation: "vertical"
			size_hint: (1,0.63)
			canvas:
				Color:
					rgba:(0.1,0.1,0.1,1) if app.theme_cls.theme_style=="Dark" else (1,1,1,1)
				Rectangle:
					pos: (self.x, self.y)
					size: self.size

			AnchorLayout:
				size_hint: (1,0.2)
				CustomButton:
					size_hint: (.6,.4)
					id:sessionBtn
					text:"Current Session"
					on_release: root.openSessionList(self)

			AnchorLayout:
				size_hint: (1,0.2)
				CustomButton:
					size_hint: (.6,.4)
					id:courseBtn
					text:"B.TECH(CSE)"
					on_release:
						root.openCourseList(self)
						
			AnchorLayout:
				size_hint: (1,0.2)

				CustomButton:
					size_hint: (.6,.4)
					id:yearBtn
					text:"Ist Year"
					on_release:
						root.openYearList(self)
			AnchorLayout:
				size_hint: (1,0.4)



#-------------------------Drop Downs Buttons--------------------------#

<SessionDrop>:

	DropBtn:
		text:"Current Session"
		on_release: root.select(self)

	DropBtn:
		text:"All"
		on_release: root.select(self)

<CourseDrop>:
	DropBtn:
		text:"B.Tech"
		on_release: root.select(self)
	DropBtn:
		text:"Ph.D"
		on_release: root.select(self)

<StreamDrop>:
	DropBtn:
		text:"CSE"
		on_release: root.select(self)
	DropBtn:
		text:"ECE"
		on_release: root.select(self)
